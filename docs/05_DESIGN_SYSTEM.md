# DOC-5: Design System (기초 디자인 시스템) — SDD 수준

## 5.1 TUI 디자인 원칙

DIT (DBmon-In-Terminal)는 s-tui(Stress Terminal UI) 스타일의 터미널 모니터링 도구이다. ANSI 256색 팔레트와 유니코드 블록 문자 기반의 시계열 차트 스택을 핵심 UI로 사용한다.

**핵심 원칙:**
- **차트 중심:** 좌측 전체를 시계열 차트 스택으로 채워 s-tui와 같은 경험을 제공한다
- **DBMS 전문화:** 선택된 DBMS 유형에 따라 전문 메트릭 그룹이 자동 로드된다
- **색상 의미 일관성:** 초록=정상, 노랑=경고, 빨강=위험은 모든 뷰에서 동일하다
- **키보드 중심:** 사이드바에서 인스턴스 전환(↑↓), 메트릭 그룹 전환(Tab)
- **반응형:** 터미널 크기에 따라 차트 수와 사이드바 폭이 자동 조정된다

## 5.2 색상 팔레트 (ANSI 256 기반)

### 시맨틱 색상

| 토큰명 | 용도 | ANSI 코드 | 시각 예시 |
|--------|------|-----------|-----------|
| `$healthy` | 정상 상태 | 82 | ██ 연두 |
| `$warning` | 경고 임계치 | 214 | ██ 주황 |
| `$critical` | 위험 임계치 | 196 | ██ 빨강 |
| `$info` | 정보성 텍스트 | 75 | ██ 하늘 |
| `$muted` | 비활성 텍스트 | 245 | ██ 회색 |

### DB 유형별 고유 색상

| 토큰명 | DB | ANSI 코드 | 시각 예시 |
|--------|-----|-----------|-----------|
| `$oracle-color` | Oracle | 208 | ██ 오렌지 |
| `$mysql-color` | MySQL | 33 | ██ 파랑 |
| `$pgsql-color` | PostgreSQL | 75 | ██ 하늘 |
| `$mssql-color` | SQL Server | 196 | ██ 빨강 |

### 배경 및 테두리

| 토큰명 | 용도 | ANSI 코드 |
|--------|------|-----------|
| `$bg-primary` | 주 배경 | 234 |
| `$bg-panel` | 패널 배경 | 236 |
| `$bg-chart` | 차트 영역 배경 | 235 |
| `$bg-selected` | 선택 항목 | 238 |
| `$border-normal` | 기본 테두리 | 240 |
| `$border-focus` | 포커스 테두리 | 75 |

## 5.3 타이포그래피

| 토큰명 | 스타일 | 용도 |
|--------|--------|------|
| `$text-title` | Bold + Underline | 뷰 제목 |
| `$text-heading` | Bold | 차트 제목, 섹션 제목 |
| `$text-body` | Normal | 일반 텍스트 |
| `$text-label` | Dim | 레이블, 단위 |
| `$text-value` | Bold | 수치값 강조 |
| `$text-mono-sm` | Normal | 테이블 데이터, SQL 텍스트 |

## 5.4 간격 시스템

| 토큰명 | 값 | 용도 |
|--------|-----|------|
| `$space-xs` | 1 col / 0 row | 인라인 값 사이 |
| `$space-sm` | 2 col / 0 row | 레이블과 값 사이 |
| `$space-md` | 1 col / 1 row | 위젯 내부 패딩 |
| `$space-lg` | 2 col / 1 row | 차트 간 간격 |
| `$space-xl` | 3 col / 2 row | 섹션 간 간격 |

## 5.5 UI 컴포넌트

### 5.5.1 상태 배지 (Status Badge)

| 상태 | 표현 | 설명 |
|------|------|------|
| HEALTHY | `● HEALTHY` (초록) | DB 정상 동작 |
| WARNING | `▲ WARNING` (노랑) | 경고 임계치 도달 |
| CRITICAL | `✖ CRITICAL` (빨강, 점멸) | 위험 임계치 초과 |
| OFFLINE | `○ OFFLINE` (회색) | 접속 불가 |
| TIMEOUT | `◌ TIMEOUT` (회색) | 수집 타임아웃 |

### 5.5.2 시계열 차트 (TimeSeries Chart) — 핵심 위젯

s-tui 스타일의 세로 스택 바 차트. 각 차트는 독립된 패널로 제목, Y축, 시계열 데이터를 포함한다.

```
┌─ CPU Usage [%] ──────────────────────────────────────────────┐
│ 100 ┤                                                        │
│     ┤████████████████████████████████████████████             │
│  50 ┤█████████████████████████████                            │
│     ┤███████████████████████████████████████████████          │
│   0 ┤────────────────────────────────────────────────────────│
│      ← 5 min ─────────────────────────────────── now →       │
└──────────────────────────────────────────────────────────────┘
```

- 차트 배경: `$bg-chart`
- 바/라인 색상: 임계치 기반 `$healthy` / `$warning` / `$critical`
- Y축: 자동 스케일링, 단위 표시
- X축: 시간 (5분/15분/1시간/24시간)
- 차트 높이: 최소 4줄, 터미널 크기에 따라 자동 조정

### 5.5.3 게이지 바 (사이드바용)

```
CPU  [████████████░░░░░░░░]  62%   ← $healthy
MEM  [████████████████░░░░]  82%   ← $warning
DISK [███████████████████░]  95%   ← $critical
```

### 5.5.4 데이터 테이블 (Sessions/SQLs 뷰용)

| 상태 | 테두리 | 행 배경 | 텍스트 |
|------|--------|---------|--------|
| 기본 | `$border-normal` | `$bg-panel` | `$text-body` |
| 선택 | `$border-focus` | `$bg-selected` | Bold |
| 경고 행 | — | — | `$warning` |
| 위험 행 | — | — | `$critical` + Bold |

### 5.5.5 메트릭 그룹 탭 바

```
[ Overview ]  Sessions   I/O   Wait   SQLs   History
```

- 활성 탭: `[ ]` 괄호 + Bold + `$info`
- 비활성 탭: `$muted`
- Tab 키로 순환, 숫자 키(1-9)로 직접 선택

### 5.5.6 인스턴스 선택기 (사이드바)

```
┌─ Instance ──────────┐
│ (●) Oracle-PROD1    │  ← 선택됨, $oracle-color
│ ( ) Oracle-PROD2    │
│ ( ) MySQL-DEV       │  ← $mysql-color
│ ( ) PgSQL-STAGE     │  ← $pgsql-color
│ ( ) MSSQL-REPORT    │  ← $mssql-color
└─────────────────────┘
```

- 각 인스턴스는 DBMS 유형별 고유 색상으로 구분
- `↑↓` 화살표로 이동, `Enter`로 선택
- 선택 시 해당 DBMS의 메트릭 그룹과 차트 스택이 자동 로드

## 5.6 메인 대시보드 레이아웃 (s-tui 스타일)

### 5.6.1 기본 레이아웃 (120×40 이상)

```
┌─ DIT ─── Oracle-PROD1 ──────────────────────────── 19:24:35 ─┐
│ [ Overview ]  Sessions   I/O   Wait   SQLs                [?]Help [q]Quit│
├─────────────────────────────────────────────────────┬────────────────────┤
│ ┌─ Host CPU [%] ──────────────────────────────────┐ │ Instance           │
│ │ ██████████████████████████████████████████       │ │ (●) Oracle-PROD1   │
│ │ ████████████████████████████              100    │ │ ( ) Oracle-PROD2   │
│ │ ████████████████████████████████████             │ │ ( ) MySQL-DEV      │
│ │                                            0    │ │ ( ) PgSQL-STAGE    │
│ ├─ Active Sessions ───────────────────────────────┤ ├────────────────────┤
│ │ ██████████                                      │ │ DB Type: Oracle    │
│ │ ██████████████████████████████              50   │ │ Status: ● HEALTHY  │
│ │ ████████████████                                │ ├────────────────────┤
│ │                                            0    │ │ Host CPU    72.1%  │
│ ├─ Wait Events [s] ──────────────────────────────┤ │ Oracle CPU  45.3%  │
│ │ ██████████████████████████████████████████       │ │ DB Time      3.2s  │
│ │ █████████████████████████████████████████  10    │ │ Sessions       42  │
│ │                                            0    │ │ TPS           128  │
│ ├─ Physical I/O [MB/s] ──────────────────────────┤ │ Logical R  1.2M/s  │
│ │ ██████████████████                              │ │ Physical R  45M/s  │
│ │ ████████████████████████████████            50   │ │ Lock Wait      3  │
│ │                                            0    │ │ Buf Hit    99.2%   │
│ └─────────────────────────────────────────────────┘ ├────────────────────┤
│                                                     │ [↑↓] Instance      │
│                                                     │ [Tab] Metric Group │
│                                                     │ [1-9] Quick Select │
│                                                     │ [h]   History      │
│                                                     │ [q]   Quit         │
├─────────────────────────────────────────────────────┴────────────────────┤
│ ▲ Oracle-PROD1 CPU 83% > WARNING(80%)                        19:24:30   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 5.6.2 최소 레이아웃 (80×24)

사이드바 숨김, 차트만 전체 화면. `F2` 키로 사이드바 토글.

```
┌─ DIT ─── Oracle-PROD1 ─────── 19:24:35 ─┐
│ [Overview] Sessions  I/O  Wait  SQLs   [?] [q]      │
├──────────────────────────────────────────────────────┤
│ ┌─ Host CPU [%] ──────────────────────────────  72% ┐│
│ │ ████████████████████████████████████████████      ││
│ │ ████████████████████████████████                  ││
│ ├─ Active Sessions ──────────────────────────── 42 ─┤│
│ │ ████████████████████████████████                  ││
│ │ ██████████████████                               ││
│ ├─ Wait Events [s] ─────────────────────────── 3.2 ─┤│
│ │ ████████████████████████████                      ││
│ │ ██████████████████████████████████████            ││
│ ├─ Physical I/O [MB/s] ─────────────────────── 45 ──┤│
│ │ ██████████████████████████████                    ││
│ └──────────────────────────────────────────────────┘│
├──────────────────────────────────────────────────────┤
│ ▲ CPU 83% > WARNING(80%)                   19:24:30 │
└──────────────────────────────────────────────────────┘
```

### 5.6.3 Sessions 탭 레이아웃

메트릭 그룹 탭 전환 시, 차트 스택 대신 데이터 테이블을 표시한다.

```
┌─ DIT ─── Oracle-PROD1 ──────────────────────────── 19:24:35 ─┐
│   Overview  [ Sessions ]  I/O   Wait   SQLs               [?]Help [q]Quit│
├─────────────────────────────────────────────────────┬────────────────────┤
│ SID,SER  SPID  BLOCKER  CMD     WAIT_EVENT          │ Instance           │
│ ──────── ───── ──────── ─────── ──────────────────── │ (●) Oracle-PROD1   │
│ 145,12   3421  [0]0     SELECT  db file seq read     │ ...                │
│ 287,5    5512  [1]145   UPDATE  enq: TX - row lock    │                    │
│ 392,8    6789  [0]0     PL/SQL  log file sync        │                    │
│ ...                                                  │                    │
├─────────────────────────────────────────────────────┴────────────────────┤
│ Active: 42  |  Blocked: 3  |  Lock Wait: 2                              │
└─────────────────────────────────────────────────────────────────────────┘
```

## 5.7 키보드 단축키

| 키 | 동작 |
|----|------|
| `↑` `↓` | 사이드바: 인스턴스 이동 |
| `Enter` | 인스턴스 선택 (차트 스택 갱신) |
| `Tab` / `Shift+Tab` | 메트릭 그룹 탭 전환 |
| `1`-`9` | 메트릭 그룹 직접 선택 |
| `h` | 히스토리 뷰 (시간 범위 선택) |
| `F2` | 사이드바 토글 (최소 모드) |
| `?` | 단축키 도움말 |
| `q` | 프로그램 종료 |
| `k` | Sessions 탭: 세션 Kill (admin 전용) |
